import React, { createContext, useContext, useState, ReactNode } from 'react';

export type Language = 'pt' | 'en' | 'es';

interface I18nContextProps {
  lang: Language;
  setLang: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  pt: {
  // Admin dashboard
  'admin.verifications_title': 'Verificações Pendentes',
  'admin.loading': 'Carregando...',
  'admin.name': 'Nome',
  'admin.email': 'E-mail',
  'admin.cpf': 'CPF',
  'admin.birth_date': 'Data de Nascimento',
  'admin.status': 'Status',
  'admin.actions': 'Ações',
  'admin.approve': 'Aprovar',
  'admin.reject': 'Rejeitar',
  'admin.no_pending': 'Nenhuma verificação pendente.',
  'admin.status_pending': 'Pendente',
  'admin.status_in_progress': 'Em análise',
  'admin.status_approved': 'Aprovada',
  'admin.status_rejected': 'Rejeitada',
  'admin.status_failed': 'Falhou',
  'sitioscarcara.verification_in_progress_title': 'Verificação em andamento',
  'sitioscarcara.verification_in_progress_desc': 'Estamos revisando suas informações. Você receberá um email com o resultado assim que a análise for concluída.',
  'sitioscarcara.verification_approved_title': 'Verificação aprovada!',
  'sitioscarcara.verification_approved_desc': 'Sua verificação foi aprovada. Você receberá um email com as próximas instruções.',
  'sitioscarcara.verification_rejected_title': 'Verificação não aprovada',
  'sitioscarcara.verification_rejected_desc': 'Sua verificação não foi aprovada. Entre em contato para mais informações.',
  'sitioscarcara.verification_failed_title': 'Falha na verificação',
  'sitioscarcara.verification_failed_desc': 'Não foi possível concluir a verificação. Tente novamente mais tarde ou entre em contato.',
    // General
    'language.portuguese': 'Português',
    'language.english': 'Inglês',
    'language.spanish': 'Espanhol',
    'sitioscarcara.title': 'Sítios Carcará – Onde a Terra Tem Sua Própria Canção',
    'sitioscarcara.headline': 'Propriedades rurais exclusivas às margens do Lago Corumbá, Goiás, Brasil',
    'sitioscarcara.about': 'Agrofloresta, sustentabilidade e Cerrado: um convite à vida em harmonia com a natureza.',
    'sitioscarcara.bidding_season': 'Temporada de Ofertas',
    'sitioscarcara.bidding_open': 'Aberta',
    'sitioscarcara.bidding_closed': 'Encerrada',
    'sitioscarcara.request_visit': 'Agendar Visita',
    'sitioscarcara.submit_offer': 'Fazer Proposta',
    'sitioscarcara.see_more': 'Ver detalhes',
    'sitioscarcara.current_bid': 'Melhor Oferta',
    'sitioscarcara.starting_price': 'Preço de Oportunidade',
    'sitioscarcara.estimated_value': 'Valor de Mercado',
    'sitioscarcara.timeline_open': 'Temporada de Ofertas: Aberta',
    'sitioscarcara.timeline_closed': 'Temporada de Ofertas: Encerrada',
    'sitioscarcara.visit_required': 'Agende uma visita para habilitar a proposta.',
    'sitioscarcara.login_required': 'Faça login para continuar.',
    'sitioscarcara.profile_required': 'Complete seu perfil para agendar visita.',
    'sitioscarcara.verified_required': 'Verifique sua conta para agendar visita.',
  'sitioscarcara.request_sent_success': 'Solicitação enviada com sucesso!',
  'sitioscarcara.guest_request_pending': 'Seu cadastro está em análise. Se aprovado, você receberá suas credenciais de acesso por email e a confirmação da visita dentro de 24h.',
  'sitioscarcara.contact_24h': 'Entraremos em contato em até 24h para confirmar sua visita.',
  'sitioscarcara.request_under_review': 'Sua solicitação está em análise',
  'sitioscarcara.reviewing_info': 'Estamos revisando suas informações. Você receberá um email dentro de 24-48h com o resultado.',
  'sitioscarcara.verification_id': 'ID da verificação',
  'sitioscarcara.request_failed': 'Não foi possível processar sua solicitação',
  'sitioscarcara.check_data_and_retry': 'Por favor, verifique seus dados e tente novamente. Se o problema persistir, entre em contato via WhatsApp.',
  'sitioscarcara.cpf_exists_title': 'CPF já cadastrado',
  'sitioscarcara.cpf_exists_desc': 'Este CPF já está cadastrado. Faça login para agendar sua visita ou recupere sua senha.',
  'sitioscarcara.registration_denied_title': 'Solicitação não aprovada',
  'sitioscarcara.registration_denied_desc': 'Não foi possível processar sua solicitação. Entre em contato para mais informações.',
  'sitioscarcara.verifying_and_sending': 'Verificando e enviando...',
  'sitioscarcara.sending': 'Enviando...',
  'sitioscarcara.schedule': 'Agendar',
  'sitioscarcara.in_person_visit': 'Visita Presencial',
  'sitioscarcara.video_visit': 'Videoconferência',
  'sitioscarcara.select': 'Selecione',
  'sitioscarcara.morning': 'Manhã (8h - 12h)',
  'sitioscarcara.afternoon': 'Tarde (13h - 17h)',
  'sitioscarcara.night': 'Noite (18h - 20h)',
  'sitioscarcara.next_steps_notice': 'Após o envio, você receberá atualizações por email sobre o status da verificação e agendamento.',
  // ...more keys as needed
  },
  en: {
  // Admin dashboard
  'admin.verifications_title': 'Pending Verifications',
  'admin.loading': 'Loading...',
  'admin.name': 'Name',
  'admin.email': 'Email',
  'admin.cpf': 'CPF',
  'admin.birth_date': 'Birth Date',
  'admin.status': 'Status',
  'admin.actions': 'Actions',
  'admin.approve': 'Approve',
  'admin.reject': 'Reject',
  'admin.no_pending': 'No pending verifications.',
  'admin.status_pending': 'Pending',
  'admin.status_in_progress': 'In progress',
  'admin.status_approved': 'Approved',
  'admin.status_rejected': 'Rejected',
  'admin.status_failed': 'Failed',
  'sitioscarcara.verification_in_progress_title': 'Verification in progress',
  'sitioscarcara.verification_in_progress_desc': 'We are reviewing your information. You will receive an email with the result as soon as the review is complete.',
  'sitioscarcara.verification_approved_title': 'Verification approved!',
  'sitioscarcara.verification_approved_desc': 'Your verification was approved. You will receive an email with next steps.',
  'sitioscarcara.verification_rejected_title': 'Verification not approved',
  'sitioscarcara.verification_rejected_desc': 'Your verification was not approved. Please contact us for more information.',
  'sitioscarcara.verification_failed_title': 'Verification failed',
  'sitioscarcara.verification_failed_desc': 'Could not complete verification. Please try again later or contact us.',
    'language.portuguese': 'Portuguese',
    'language.english': 'English',
    'language.spanish': 'Spanish',
    'sitioscarcara.title': 'Sítios Carcará – Where the Land Has Its Own Song',
    'sitioscarcara.headline': 'Exclusive rural properties by Corumbá Lake, Goiás, Brazil',
    'sitioscarcara.about': 'Agroforestry, sustainability, and the Cerrado: an invitation to live in harmony with nature.',
    'sitioscarcara.bidding_season': 'Bidding Season',
    'sitioscarcara.bidding_open': 'Open',
    'sitioscarcara.bidding_closed': 'Closed',
    'sitioscarcara.request_visit': 'Request a Visit',
    'sitioscarcara.submit_offer': 'Submit Offer',
    'sitioscarcara.see_more': 'See details',
    'sitioscarcara.current_bid': 'Best Offer',
    'sitioscarcara.starting_price': 'Opening Offer',
    'sitioscarcara.estimated_value': 'Estimated Value',
    'sitioscarcara.timeline_open': 'Bidding Season: Open',
    'sitioscarcara.timeline_closed': 'Bidding Season: Closed',
    'sitioscarcara.visit_required': 'Schedule a visit to enable offers.',
    'sitioscarcara.login_required': 'Please log in to continue.',
    'sitioscarcara.profile_required': 'Complete your profile to schedule a visit.',
    'sitioscarcara.verified_required': 'Verify your account to schedule a visit.',
  'sitioscarcara.request_sent_success': 'Request sent successfully!',
  'sitioscarcara.guest_request_pending': 'Your registration is under review. If approved, you will receive your access credentials by email and the visit confirmation within 24h.',
  'sitioscarcara.contact_24h': 'We will contact you within 24h to confirm your visit.',
  'sitioscarcara.request_under_review': 'Your request is under review',
  'sitioscarcara.reviewing_info': 'We are reviewing your information. You will receive an email within 24-48h with the result.',
  'sitioscarcara.verification_id': 'Verification ID',
  'sitioscarcara.request_failed': 'Could not process your request',
  'sitioscarcara.check_data_and_retry': 'Please check your data and try again. If the problem persists, contact us via WhatsApp.',
  'sitioscarcara.cpf_exists_title': 'CPF already registered',
  'sitioscarcara.cpf_exists_desc': 'This CPF is already registered. Please log in to schedule your visit or recover your password.',
  'sitioscarcara.registration_denied_title': 'Request not approved',
  'sitioscarcara.registration_denied_desc': 'We could not process your request. Please contact us for more information.',
  'sitioscarcara.verifying_and_sending': 'Verifying and sending...',
  'sitioscarcara.sending': 'Sending...',
  'sitioscarcara.schedule': 'Schedule',
  'sitioscarcara.in_person_visit': 'In-person Visit',
  'sitioscarcara.video_visit': 'Video Call',
  'sitioscarcara.select': 'Select',
  'sitioscarcara.morning': 'Morning (8am - 12pm)',
  'sitioscarcara.afternoon': 'Afternoon (1pm - 5pm)',
  'sitioscarcara.night': 'Night (6pm - 8pm)',
  'sitioscarcara.next_steps_notice': 'After submitting, you will receive email updates about your verification and scheduling status.',
  // ...more keys as needed
  },
  es: {
  // Admin dashboard
  'admin.verifications_title': 'Verificaciones Pendientes',
  'admin.loading': 'Cargando...',
  'admin.name': 'Nombre',
  'admin.email': 'Correo',
  'admin.cpf': 'CPF',
  'admin.birth_date': 'Fecha de Nacimiento',
  'admin.status': 'Estado',
  'admin.actions': 'Acciones',
  'admin.approve': 'Aprobar',
  'admin.reject': 'Rechazar',
  'admin.no_pending': 'No hay verificaciones pendientes.',
  'admin.status_pending': 'Pendiente',
  'admin.status_in_progress': 'En revisión',
  'admin.status_approved': 'Aprobada',
  'admin.status_rejected': 'Rechazada',
  'admin.status_failed': 'Fallida',
  'sitioscarcara.verification_in_progress_title': 'Verificación en progreso',
  'sitioscarcara.verification_in_progress_desc': 'Estamos revisando su información. Recibirá un correo electrónico con el resultado tan pronto como se complete la revisión.',
  'sitioscarcara.verification_approved_title': '¡Verificación aprobada!',
  'sitioscarcara.verification_approved_desc': 'Su verificación fue aprobada. Recibirá un correo electrónico con los próximos pasos.',
  'sitioscarcara.verification_rejected_title': 'Verificación no aprobada',
  'sitioscarcara.verification_rejected_desc': 'Su verificación no fue aprobada. Contáctenos para más información.',
  'sitioscarcara.verification_failed_title': 'Fallo en la verificación',
  'sitioscarcara.verification_failed_desc': 'No se pudo completar la verificación. Inténtelo de nuevo más tarde o contáctenos.',
    'language.portuguese': 'Portugués',
    'language.english': 'Inglés',
    'language.spanish': 'Español',
    'sitioscarcara.title': 'Sítios Carcará – Donde la Tierra Tiene Su Propia Canción',
    'sitioscarcara.headline': 'Propiedades rurales exclusivas junto al Lago Corumbá, Goiás, Brasil',
    'sitioscarcara.about': 'Agroforestería, sostenibilidad y el Cerrado: una invitación a vivir en armonía con la naturaleza.',
    'sitioscarcara.bidding_season': 'Temporada de Ofertas',
    'sitioscarcara.bidding_open': 'Abierta',
    'sitioscarcara.bidding_closed': 'Cerrada',
    'sitioscarcara.request_visit': 'Solicitar Visita',
    'sitioscarcara.submit_offer': 'Enviar Oferta',
    'sitioscarcara.see_more': 'Ver detalles',
    'sitioscarcara.current_bid': 'Mejor Oferta',
    'sitioscarcara.starting_price': 'Oferta Inicial',
    'sitioscarcara.estimated_value': 'Valor Estimado',
    'sitioscarcara.timeline_open': 'Temporada de Ofertas: Abierta',
    'sitioscarcara.timeline_closed': 'Temporada de Ofertas: Cerrada',
    'sitioscarcara.visit_required': 'Solicite una visita para habilitar la oferta.',
    'sitioscarcara.login_required': 'Inicie sesión para continuar.',
    'sitioscarcara.profile_required': 'Complete su perfil para solicitar una visita.',
    'sitioscarcara.verified_required': 'Verifique su cuenta para solicitar una visita.',
  'sitioscarcara.request_sent_success': '¡Solicitud enviada con éxito!',
  'sitioscarcara.guest_request_pending': 'Su registro está en revisión. Si es aprobado, recibirá sus credenciales de acceso por correo electrónico y la confirmación de la visita en 24h.',
  'sitioscarcara.contact_24h': 'Nos pondremos en contacto con usted en un plazo de 24h para confirmar su visita.',
  'sitioscarcara.request_under_review': 'Su solicitud está en revisión',
  'sitioscarcara.reviewing_info': 'Estamos revisando su información. Recibirá un correo electrónico en 24-48h con el resultado.',
  'sitioscarcara.verification_id': 'ID de verificación',
  'sitioscarcara.request_failed': 'No se pudo procesar su solicitud',
  'sitioscarcara.check_data_and_retry': 'Por favor, verifique sus datos e intente nuevamente. Si el problema persiste, contáctenos por WhatsApp.',
  'sitioscarcara.cpf_exists_title': 'CPF ya registrado',
  'sitioscarcara.cpf_exists_desc': 'Este CPF ya está registrado. Inicie sesión para solicitar su visita o recupere su contraseña.',
  'sitioscarcara.registration_denied_title': 'Solicitud no aprobada',
  'sitioscarcara.registration_denied_desc': 'No se pudo procesar su solicitud. Contáctenos para más información.',
  'sitioscarcara.verifying_and_sending': 'Verificando y enviando...',
  'sitioscarcara.sending': 'Enviando...',
  'sitioscarcara.schedule': 'Agendar',
  'sitioscarcara.in_person_visit': 'Visita Presencial',
  'sitioscarcara.video_visit': 'Videollamada',
  'sitioscarcara.select': 'Seleccione',
  'sitioscarcara.morning': 'Mañana (8h - 12h)',
  'sitioscarcara.afternoon': 'Tarde (13h - 17h)',
  'sitioscarcara.night': 'Noche (18h - 20h)',
  'sitioscarcara.next_steps_notice': 'Después de enviar, recibirá actualizaciones por correo electrónico sobre el estado de la verificación y el agendamiento.',
  // ...more keys as needed
  },
};

const I18nContext = createContext<I18nContextProps | undefined>(undefined);

export function I18nProvider({ children }: { children: ReactNode }) {
  const [lang, setLang] = useState<Language>('pt');
  const t = (key: string) => translations[lang][key] || key;
  return (
    <I18nContext.Provider value={{ lang, setLang, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
}
